(function(Q){"use strict";let I=!1,P=!1,T=[],W=!1,D=[],A=[],k;const a={FollowedApps:new Set,IgnoredApps:new Set,OwnedApps:new Set,FamilySharedApps:new Set,WishedApps:new Set,OwnedPackages:new Set,OnExtensionUserdataLoaded:e=>{if(W){e();return}D.push(e)},EnhanceLazyLoadedApps:e=>{const t=e.querySelectorAll(".app");for(const o of t){const s=+o.dataset.appid;a.FollowedApps.has(s)&&o.classList.add("followed"),a.WishedApps.has(s)&&o.classList.add("wished"),a.OwnedApps.has(s)?o.classList.add("owned"):a.FamilySharedApps.has(s)&&o.classList.add("infamily"),a.IgnoredApps.has(s)&&o.classList.add("ignored")}a.BindHover(e)},BindHover:e=>{},HideHoverIfAny:()=>{},Alert:(e,t=null)=>{const o=document.createElement("toast-notification");return t!==null&&(o.title=t),o.body=e,document.querySelector("#js-notifications").append(o),o},Storage:{Get(e){try{return window.localStorage.getItem(e)}catch{return null}},Set(e,t){try{window.localStorage.setItem(e,t)}catch{}},Remove(e){try{window.localStorage.removeItem(e)}catch{}}},LazyLoad(e,t){if(!("IntersectionObserver"in window)){t();return}k||(k=new window.IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&(k.unobserve(s.target),s.target.dispatchEvent(new Event("lazyload")))})})),k.observe(e),e.addEventListener("lazyload",t,{once:!0})},ImageError(e){e.complete&&e.naturalWidth===0?e.src="/static/img/applogo.svg":e.addEventListener("error",function(){this.src="/static/img/applogo.svg"},{once:!0})},RequirePageScreenshotViewer(e,t=!1){if(t){for(let o=0;o<A.length;o++)A[o](e);A=[],a.RequirePageScreenshotViewer=o=>o(e)}else A.push(e)},RequireHighstock(e){if(window.Highcharts){j(),e();return}if(T.push(e),I)return;I=!0;const t=document.createElement("script");t.nonce=document.querySelector("script[nonce]").nonce,t.src="/static/js/vendor/highstock.js?v=a091f0035dc9e6b3",t.integrity="sha512-oJHwA13J5rOL+aiMDwungAJUhJSxWbZuQNHrDgRNE7033UkScc5yweYk3x6Qx0odsWZVhp2kaNJgCEnnJyzE3A==",t.async=!0,t.addEventListener("load",function(){j();for(const o of T)o();T=[],I=!1}),document.head.appendChild(t)}},X=e=>{const t=typeof $=="function"&&typeof $.fn=="object"&&typeof $.fn.dataTable=="function";let o=t?[]:document.querySelectorAll(".app"),s=t?[]:document.querySelectorAll(".package");t&&($($.fn.dataTable.tables()).each(function(){const n=$(this).DataTable().table();o=n.rows(".app").nodes().reduce(function(r,d){return r.push(d),r},o),s=n.rows(".package").nodes().reduce(function(r,d){return r.push(d),r},s)}),o.length===0&&document.body.classList.contains("page-calculator")&&(o=document.querySelectorAll(".app")));const u=[],h=[];for(const n of o){const r=+n.dataset.appid,d=u[r];d?d.push(n):u[r]=[n]}o=null;for(const n of s){const r=+n.dataset.subid,d=h[r];d?d.push(n):h[r]=[n]}if(s=null,e.rgFollowedApps){a.FollowedApps=new Set(e.rgFollowedApps);for(const n of e.rgFollowedApps){const r=u[n];if(r)for(const d of r)d.classList.add("followed")}}if(e.rgWishlist){a.WishedApps=new Set(e.rgWishlist);for(const n of e.rgWishlist){const r=u[n];if(r)for(const d of r)d.classList.add("wished")}}if(e.rgAppsInCart)for(const n of e.rgAppsInCart){const r=u[n];if(r)for(const d of r)d.classList.add("cart")}if(e.rgOwnedApps){a.OwnedApps=new Set(e.rgOwnedApps);for(const n of e.rgOwnedApps){const r=u[n];if(r)for(const d of r)d.classList.add("owned")}}if(e.rgFamilySharedApps){a.FamilySharedApps=new Set(e.rgFamilySharedApps);for(const n of e.rgFamilySharedApps){const r=u[n];if(r)for(const d of r)d.classList.contains("owned")||d.classList.add("infamily")}}if(e.rgIgnoredApps)for(let n of Object.keys(e.rgIgnoredApps)){n=+n,a.IgnoredApps.add(n);const r=u[n];if(r)for(const d of r)d.classList.add("ignored")}if(e.rgOwnedPackages&&(a.OwnedPackages=new Set(e.rgOwnedPackages)),a.OwnedPackages.add(0),h.length>0){if(e.rgPackagesInCart)for(const n of e.rgPackagesInCart){const r=h[n];if(r)for(const d of r)d.classList.add("cart")}if(e.rgOwnedPackages)for(const n of e.rgOwnedPackages){const r=h[n];if(r)for(const d of r)d.classList.add("owned")}}},j=()=>{P||(P=!0,window.Highcharts.wrap(window.Highcharts.seriesTypes.flags.prototype,"translate",function(e){if(e.apply(this,...arguments),!this.options.onSeries)return;const t=this.chart.get(this.options.onSeries);!t||!t.points||!t.currentDataGrouping||this.points.forEach(o=>{const s=t.points.find(h=>h.x>o.x);if(!s)return;const u=t.points[s.index>0?s.index-1:0];o.plotX=u.plotX,o.plotY=u.plotY})}),window.Highcharts.setOptions({accessibility:{enabled:!1},chart:{animation:!1,zooming:{type:"x",mouseWheel:{enabled:!1}},backgroundColor:"transparent",spacing:[5,0,15,0],style:{fontSize:"16px",fontFamily:"inherit"}},title:{style:{color:"var(--body-color)"}},yAxis:{gridLineColor:"rgba(180, 180, 180, 0.2)",labels:{style:{color:"var(--muted-color)"}}},xAxis:{lineColor:"var(--border-color)",tickColor:"var(--border-color)",crosshair:{width:30,color:"rgba(180, 180, 180, 0.2)"},labels:{style:{color:"var(--body-color)"}}},legend:{itemHoverStyle:{color:"var(--link-color)"},itemHiddenStyle:{color:"var(--border-color)"},itemStyle:{color:"var(--body-color)",fontSize:"16px",fontWeight:"400"}},plotOptions:{series:{animation:!1,dataGrouping:{enabled:!1},states:{hover:{lineWidthPlus:0}}}},credits:{text:"data by SteamDB.info (powered by highcharts.com)",position:{x:0,y:-3},style:{fontSize:"12px",color:"var(--muted-color)"}},exporting:{buttons:{contextButton:{symbol:"url(/static/img/download.svg)",symbolSize:24,symbolX:26,symbolY:24,menuItems:["downloadCSV","downloadXLS"],theme:{fill:"none",states:{hover:{fill:"var(--border-color-2)"},select:{fill:"var(--border-color)"}}}}}},navigation:{menuStyle:{borderRadius:"6px",borderColor:"var(--border-color)",background:"var(--tooltip-bg)",boxShadow:"-8px -8px 24px rgba(149, 157, 165, 0.2)"},menuItemStyle:{color:"var(--body-bg-color)",transition:"none",fontSize:"14px"}},rangeSelector:{inputEnabled:!1,labelStyle:{color:"var(--body-color)"},buttonTheme:{width:"auto",height:24,paddingLeft:10,paddingRight:10,fill:"none",r:6,stroke:"var(--border-color)","stroke-width":"1px",style:{color:"var(--link-color)",fontSize:"16px",fontWeight:"bold"},states:{hover:{fill:"var(--border-color)",style:{color:"var(--link-color-hover)"}},select:{fill:"var(--border-color)",style:{color:"var(--body-color)"}},disabled:{"stroke-width":0,style:{color:"var(--border-color)"}}}}},navigator:{handles:{backgroundColor:"var(--border-color-2)",borderColor:"var(--link-color)"},xAxis:{gridLineColor:"var(--border-color)",labels:{style:{color:"var(--muted-color)",opacity:1}}},series:{lineWidth:2},outlineColor:"var(--border-color)"},tooltip:{shared:!0,split:!1,shadow:!1,borderWidth:0,borderRadius:6,headerFormat:"{point.key} UTC<br/>",backgroundColor:"var(--tooltip-bg)",style:{fontSize:"14px",color:"var(--body-bg-color)"}}}))},H=(e,t,o)=>{document.querySelectorAll(e).forEach(s=>{o?s.classList.add(t):s.classList.remove(t)})},b=(e,t,o)=>H(`.app[data-appid="${e}"]`,t,o),L=(e,t,o)=>H(`.package[data-subid="${e}"]`,t,o),F=(e,t,o)=>H(`.bundle[data-bundleid="${e}"]`,t,o),q=e=>{if(!(!e.response||!e.response.success)){if(e.request.appid>0){const t=e.request.appid;switch(e.request.contentScriptQuery){case"StoreWishlistAdd":a.WishedApps.add(t),b(t,"wished",!0);break;case"StoreWishlistRemove":a.WishedApps.delete(t),b(t,"wished",!1);break;case"StoreFollow":a.FollowedApps.add(t),b(t,"followed",!0);break;case"StoreUnfollow":a.FollowedApps.delete(t),b(t,"followed",!1);break;case"StoreIgnore":a.IgnoredApps.add(t),b(t,"ignored",!0);break;case"StoreUnignore":a.IgnoredApps.delete(t),b(t,"ignored",!1);break;case"Watch":b(t,"watched",!0);break;case"Unwatch":b(t,"watched",!1);break}}else if(e.request.subid>0){const t=e.request.subid;switch(e.request.contentScriptQuery){case"StoreAddToCart":L(t,"cart",!0);break;case"StoreAddFreeLicense":L(t,"owned",!0);break;case"Watch":L(t,"watched",!0);break;case"Unwatch":L(t,"watched",!1);break}}else if(e.request.bundleid>0){const t=e.request.bundleid;switch(e.request.contentScriptQuery){case"Watch":F(t,"watched",!0);break;case"Unwatch":F(t,"watched",!1);break}}}};if("BroadcastChannel"in window){let e=null;try{e=new BroadcastChannel("steamdb-extension"),e.addEventListener("message",t=>{t&&t.data&&t.data.type==="steamdb:extension-response"&&q(t.data)})}catch{}window.addEventListener("message",t=>{if(!(!t||!t.data)&&t.origin===window.location.origin)if(t.data.type==="steamdb:extension-loaded"){W=!0,X(t.data.data);for(const o of D)o();D=[]}else if(t.data.type==="steamdb:extension-init")document.querySelectorAll(".js-extension-tip").forEach(o=>{o.hidden=!0}),"OnExtensionInit"in a&&a.OnExtensionInit(t.data.data);else if(t.data.type==="steamdb:extension-error"){try{if(window.sessionStorage.getItem("extension_error_hidden")&&location.pathname!=="/freepackages/")return}catch{}const o=a.Alert(t.data.error,"Extension error");if(typeof InstallTrigger<"u"||navigator.userAgent.includes(" Firefox/")){const u=document.createElement("div");u.textContent="If you use Firefox containers, extension is not compatible with it.",o.append(u)}const s=document.createElement("a");s.className="btn btn-sm btn-primary",s.href="https://store.steampowered.com/login/",s.textContent="Sign in on the Steam Store",o.append(s),o.addEventListener("toast-close",()=>{try{window.sessionStorage.setItem("extension_error_hidden","1")}catch{}})}else t.data.type==="steamdb:extension-response"&&(e!==null&&e.postMessage(t.data),q(t.data),(!t.data.response||!t.data.response.success)&&!location.pathname.startsWith("/freepackages/")&&(a.Alert(`Something went wrong.
`+(t.data.response&&t.data.response.error||"Unknown error. Are you logged in on the Steam store?"),"Extension error"),console.error(t.data.response)))})}const K=e=>{const t=[];if(e.forEach((o,s)=>{const u=s.toLowerCase();(u==="__cf_chl_captcha_tk__"||u==="__cf_chl_jschl_tk__"||u==="ref"||u==="fbclid"||u.startsWith("utm_"))&&t.push(s)}),t.length>0){for(const o of t)e.delete(o);window.history.replaceState(null,null,Array.from(e).length?`${location.pathname}?${e}`:location.pathname)}},y=document.querySelector(".header"),g=document.querySelector(".header-menu-container"),x=document.querySelector("#js-header-hamburger"),B=document.querySelector(".account-menu"),R=document.querySelector(".header-user-avatar");R&&R.addEventListener("click",e=>{e.preventDefault(),B.hidden=!B.hidden}),x.addEventListener("click",function(){g.hidden=!g.hidden,g.hidden||(g.querySelector(".header-menu").focus(),y.classList.remove("header-search-focus"),a.HideHoverIfAny())}),g.addEventListener("click",function(e){e.target.className===g.className&&(g.hidden=!0)});const _=document.getElementById("js-header-form"),w=_.querySelector(".field");document.addEventListener("keydown",e=>{if(e.key==="Escape"){if(document.documentElement.classList.contains("js-screenshots-shown"))return;g.hidden?y.classList.remove("header-search-focus"):(g.hidden=!0,x.focus())}e.ctrlKey||e.metaKey||["INPUT","TEXTAREA","SELECT","BUTTON"].includes(e.target.tagName)&&e.target!==x||(e.code==="Slash"||e.code==="KeyS"||e.key==="/"||e.key==="s"?(e.preventDefault(),w.focus()):(e.code==="KeyM"||e.key==="m")&&x.click())});function Y(){this.src="/static/p.gif"}if(_){_.addEventListener("submit",function(c){const l=w.value.replace(/^\s+|\s+$/g,"");let i=l.match(/^([0-9]{1,7})$/);if(i!==null){window.location=`/app/${i[0]}/`,c.preventDefault();return}if(i=l.match(/(7656119[0-9]{10})/),i!==null){window.location=`/calculator/${i[1]}/`,c.preventDefault();return}if(i=l.match(/(?:id|profiles)\/([\d\w-]+)/),i!==null){window.location=`/calculator/?player=${i[1]}`,c.preventDefault();return}i=l.match(/(app|sub|bundle|depot|dlc)\/([0-9]{1,8})/),i!==null&&(i[1]==="dlc"&&(i[1]="app"),window.location=`/${i[1]}/${i[2]}/`,c.preventDefault())},!1);const e=document.getElementById("js-search-suggestions"),t=document.getElementById("js-search-tips"),o=new Map;let s=0,u=0,h="",n;const r=t.dataset.a,d={Accept:"application/json","x-algolia-application-id":r,"x-algolia-api-key":t.dataset.k},z=()=>{s=0;const c={hitsPerPage:10,attributesToSnippet:null,attributesToHighlight:"name",attributesToRetrieve:"objectID,lastUpdated,small_capsule",query:h};n&&n.abort(),n=new AbortController,fetch(`https://${r}-dsn.algolia.net/1/indexes/steamdb/query?x-algolia-agent=SteamDB%20Autocompletion`,{method:"POST",body:JSON.stringify(c),signal:n.signal,headers:d}).then(l=>l.json()).then(l=>{o.set(c.query,l),n=null,O(l)}).catch(console.error)},G=()=>{s=0;const c={hitsPerPage:20,attributesToSnippet:null,attributesToHighlight:"name",attributesToRetrieve:"type,id,lastUpdated,small_capsule",query:h};n&&n.abort(),n=new AbortController,fetch(`https://${r}-dsn.algolia.net/1/indexes/all_names/query?x-algolia-agent=SteamDB%20Autocompletion`,{method:"POST",body:JSON.stringify(c),signal:n.signal,headers:d}).then(l=>l.json()).then(l=>{n=null,O(l,!1)}).catch(console.error)},O=(c,l=!0)=>{const i=document.body.dataset.storeAssets;let E=-1;const M=new Set;if(l){const p=e.querySelector(".focus");if(p&&(E=+p.dataset.appid),t.hidden=!0,e.replaceChildren(),a.HideHoverIfAny(),!c.nbHits){const f=document.createElement("span");c.message?f.innerText=`Algolia error: ${c.message}`:(f.innerText="No results found.",N()),e.appendChild(f);return}}else{if(!c.nbHits)return;const p=o.get(h);if(p)for(const f of p.hits)M.add(`a${f.objectID}`)}let J="",V=0;{const p=location.pathname.match(/\/app\/[0-9]+\/(?<page>\w+)/);p&&(J=`${p.groups.page}/`)}for(const p of c.hits){if(M.has(p.objectID))continue;const f=document.createElement("a");l?(p.type="app",p.id=+p.objectID):(p.lastUpdated=0,f.classList.add("app-small"));let S="/static/img/applogo.svg",v=p._highlightResult.name.value;switch(l||(v=`${v} <span class="muted">(${p.type}/${p.id})</span>`),p.type){case"app":{const m=p.id;f.classList.add("app"),f.dataset.appid=m,f.href=`/app/${m}/${J}`,f.innerHTML=v,a.OwnedApps.has(m)?f.classList.add("owned"):a.FamilySharedApps.has(m)?f.classList.add("infamily"):a.WishedApps.has(m)?f.classList.add("wished"):a.FollowedApps.has(m)&&f.classList.add("followed"),E===m&&(E=-1,f.classList.add("focus")),p.small_capsule?S=`${i}apps/${m}/${p.small_capsule}/capsule_231x87.jpg`:S=`${i}apps/${m}/capsule_231x87.jpg?t=${p.lastUpdated}`;break}case"sub":{const m=p.id;f.classList.add("app"),f.href=`/sub/${m}/`,f.innerHTML=v,a.OwnedPackages.has(m)&&f.classList.add("owned"),S=`${i}subs/${m}/capsule_231x87.jpg`;break}case"bundle":{const m=p.id;f.classList.add("app"),f.href=`/bundle/${m}/`,f.innerHTML=v,p.small_capsule&&(S=`${i}bundles/${m}/${p.small_capsule}/capsule_231x87.jpg`);break}}const C=document.createElement("img");if(C.addEventListener("error",Y,{once:!0}),C.alt="",C.src=S,f.prepend(C),e.appendChild(f),++V>10)break}if(l){if(E>-1){const p=e.firstElementChild;p&&p.classList.add("focus")}a.BindHover(e),window.innerHeight>200+V*55&&N()}},N=()=>{clearTimeout(s),u=1/0,s=setTimeout(G,1e3)},U=()=>{y.classList.add("header-search-focus"),g.hidden=!0,a.HideHoverIfAny()};w.addEventListener("keydown",function(c){if(c.key==="ArrowUp"||c.key==="ArrowDown"){c.preventDefault();const l=e.querySelector(".focus");let i;c.key==="ArrowUp"?(l&&(i=l.previousSibling),i||(i=e.lastElementChild)):(l&&(i=l.nextSibling),i||(i=e.firstElementChild)),i&&(l&&l.classList.remove("focus"),i.classList.add("focus"))}else if(c.key==="Enter"){if(c.ctrlKey){const i=new URLSearchParams;i.append("query",h),window.location.href=`/instantsearch/?${i.toString()}`,c.preventDefault();return}const l=e.querySelector(".focus");l&&(l.click(),c.preventDefault())}else c.key==="Escape"&&w.blur()}),w.addEventListener("input",function(){U();const c=this.value;if(!c||c.length>200){e.replaceChildren(),h="",t.hidden=!1,a.HideHoverIfAny();return}if(h===c)return;h=c;const l=o.get(h);if(l){clearTimeout(s),s=0,O(l);return}const i=Date.now();if(s){i-u<200&&(clearTimeout(s),u=i,s=setTimeout(z,200));return}u=i,s=setTimeout(z,350)}),document.querySelector(".header-search-close").addEventListener("click",()=>{y.classList.remove("header-search-focus")}),document.querySelector(".header-search-side-close").addEventListener("click",()=>{y.classList.remove("header-search-focus")}),document.querySelector(".header-search-mobile").addEventListener("click",()=>{U(),w.focus()}),w.addEventListener("focus",U)}if(window.location.hostname==="steamdb.info"){const e=new URLSearchParams(location.search);K(e)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).catch(e=>{console.error(e)}),Q.SteamDB=a})(typeof exports<"u"?exports:window);
